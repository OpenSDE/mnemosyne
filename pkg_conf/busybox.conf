# --- SDE-COPYRIGHT-NOTE-BEGIN ---
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
#
# Filename: target/mnemosyne/pkg_conf/busybox.conf
# Copyright (C) 2008 The OpenSDE Project
# Copyright (C) 2002 - 2006 Alejandro Mery
#
# More information can be found in the files COPYING and README.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; version 2 of the License. A copy of the
# GNU General Public License can be found in the file COPYING.
# --- SDE-COPYRIGHT-NOTE-END ---

BB_MNEMOSYNE_DIR="$base/target/$SDECFG_TRG_MNEMOSYNE/pkg_conf/busybox"

bb_mnemosyne_append()
{
	local x= y=
	for x; do
		# busybox config settings
		y="$BB_MNEMOSYNE_DIR/$x.config"
		[ ! -s "$y" ] || var_append conffiles ' ' "$y"
	done
}

# mnemosyne generics
bb_mnemosyne_append mnemosyne

case "$SDECFG_TRG_MNEMOSYNE_FOOTPRINT" in
embedded)
	bb_mnemosyne_append embedded

	if [ "$SDECFG_TRG_MNEMOSYNE_BOOT" != 'vserver' ]; then
		[ "$SDECFG_TRG_MNEMOSYNE_NETWORK" = 1 ] && bb_mnemosyne_append network
		[ "$SDECFG_TRG_MNEMOSYNE_KERNEL" = 'linux' ] && bb_mnemosyne_append linux
	fi
	;;
esac

[ "$SDECFG_TRG_MNEMOSYNE_EMBEDDED_INIT" = 1 ] && bb_mnemosyne_append init

pkginstalled util-linux util-linux-ng || bb_mnemosyne_append util-linux

unset bb_mnemosyne_append
unset BB_MNEMOSYNE_DIR
